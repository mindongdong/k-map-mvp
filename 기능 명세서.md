## **K-MAP 프로젝트 기능 명세서**

### **1\. 프로젝트 개요**

이 문서는 'K-MAP' 프로젝트의 MVP(Minimum Viable Product) 개발을 위한 기능 명세서입니다. 본 프로젝트는 복잡한 생물학 데이터에 대한 접근성을 높이고, 독자적인 한국인 인체 데이터를 제공하며, 최적화된 시각화 경험을 제공하는 것을 목표로 합니다.

- **프로젝트 명**: K-MAP
- **타겟 사용자**: 생물정보학 연구원, 의료 종사자(의사, 연구원), 관련 전공 학생
- **핵심 가치**:

  - 직관적인 UI/UX 제공
  - 독자적인 한국인 인체 생물학 데이터셋 제공
  - 빠른 데이터 시각화 속도

- **기술 스택**:
  - Frontend: React.js, Plotly.js
  - Backend: Python, FastAPI
  - Database: PostgreSQL
  - Infra: Docker

---

### **2\. 공통 기능 요구사항**

모든 페이지에 공통적으로 적용되는 기능 및 UI 요소입니다.

- **화면 구성 요소 (UI Elements)**
  - **헤더 (Header)** 및 **푸터 (Footer)**: 모든 페이지에서 재사용될 공통 레이아웃 컴포넌트를 구현합니다.
  - **내비게이션**: React Router를 사용하여 주요 페이지 간 이동 경로를 설정합니다. 사용자는 헤더의 메뉴를 통해 각 페이지로 이동할 수 있습니다.

---

### **3\. 사용자 기능 요구사항**

#### **3.1. 데이터셋 페이지**

사용자가 데이터를 탐색하고, 상세 정보를 확인하며, 파일을 다운로드하는 핵심 페이지입니다.

##### **3.1.1. 목록 보기 (List View)**

- **화면 구성 요소**

  - **데이터셋 테이블**: 다음 컬럼으로 구성된 목록을 표시합니다: Dataset ID, Group, Data Type, Organ, Status, Publication Date.

  - **필터**: 각 컬럼 헤더를 기준으로 문자열 그룹 필터링 기능을 제공합니다.

  - **검색**: 데이터셋을 검색하는 기능을 제공합니다.

- **사용자 인터랙션**

  - 테이블의 특정 행(데이터셋)을 클릭하면 상세 보기 페이지로 이동합니다.

- **API 요구사항**

  - GET /datasets: 데이터셋 목록을 조회하는 API.

    - **Request**: 필터링 조건, 검색 키워드를 Query Parameter로 전달.
    - **Response**: 테이블 컬럼에 해당하는 필드를 포함한 데이터셋 객체의 배열.

##### **3.1.2. 상세 보기 (Detail View)**

- **화면 구성 요소**

  - **요약 (Summary)**: 데이터셋 설명(Description), 연구 그룹, 공개일 정보를 표시합니다.

  - **데이터 테이블 (Data Table)**: 데이터셋을 구성하는 개별 파일 목록을 확인하고 다운로드할 수 있는 테이블을 제공합니다.

  - **저작자 정보 (Attribution)**: 데이터 인용을 위한 정보를 표시합니다.

  - **상세 기술 메타데이터 (Detailed Technical Metadata)**: 관리자가 입력한 Key-Value 형식의 상세 기술 정보를 표(Table) 형태로 표시합니다.

- **사용자 인터랙션**

  - 데이터 테이블의 '다운로드' 버튼을 클릭하여 개별 파일을 다운로드할 수 있습니다.

- **API 요구사항**
  - GET /datasets/{dataset_id}: 특정 데이터셋의 모든 상세 정보를 조회하는 API.
  - GET /datasets/{dataset_id}/download/{file_name}: 특정 파일을 다운로드하는 API.

---

#### **3.2. 데이터 시각화 페이지**

사용자가 데이터의 의미를 시각적으로 탐색하는 페이지입니다. 모든 차트는 Plotly 라이브러리를 기반으로 구현하며, 확대/축소/패닝 및 호버 기능을 지원합니다.

- **시각화 종류 및 개발 우선순위**

  - **1순위**: UMAP Scatter Plot \- 세포 타입(celltype)별 분포를 색상으로 구분해 보여줍니다.

  - **2순위**: 계층적 클러스터링 히트맵 (Clustered Heatmap) \- 유전자와 조직 간의 발현량 패턴을 시각화합니다.

  - **후순위**: 복합 시각화 (유전자 발현량, 세포 비율, 세포 수) 및 조직별 유전자 발현 Boxplot.

- **API 요구사항**

  - 백엔드는 DB 데이터를 바탕으로 Plotly 차트를 렌더링하는 데 필요한 JSON 객체를 생성하여 프론트엔드로 전달해야 합니다.

  - GET /visualizations/{chart_type}: 각 시각화 종류에 맞는 Plotly JSON 객체를 반환하는 API.

---

### **4\. 관리자 기능 요구사항**

데이터 관리를 위한 기능이며, 관리자 로그인을 통해서만 접근이 가능합니다.

#### **4.1. 관리자 인증**

- **화면 구성 요소**: 관리자 계정 로그인을 위한 폼(Form) UI.

- **API 요구사항**:
  - POST /admin/login: 로그인 인증을 처리하는 API.

#### **4.2. 데이터 관리 (CRUD)**

관리자가 데이터셋 및 관련 메타데이터를 생성(업로드), 수정, 삭제할 수 있는 기능입니다.

- **화면 구성 요소**

  - 데이터 업로드 및 수정을 위한 폼(Form) UI를 구현합니다.

- **데이터 업로드/수정 폼 명세**

  - **지원 파일 형식**: .csv, .json, .h5ad.

  - **주요 메타데이터 입력 필드**:

    - Dataset ID (텍스트 입력)

    - Data Type, Organ (드롭다운 선택, 직접 입력 옵션 제공)

    - Description (여러 줄 텍스트 입력)

    - Group, Citation (텍스트 입력)

    - Publication Date (날짜 선택)

  - **상세 기술 메타데이터 입력 필드**:

    - '필드 추가' 버튼을 통해 Key-Value 쌍을 동적으로 추가할 수 있는 기능을 제공합니다.

- **API 요구사항**

  - POST /admin/datasets: 신규 데이터셋을 업로드하는 API (Create).

  - PUT /admin/datasets/{dataset_id}: 기존 데이터셋 정보를 수정하는 API (Update).

  - DELETE /admin/datasets/{dataset_id}: 특정 데이터셋을 삭제하는 API (Delete).

---

### **5\. 범위 제외 사항 (Out of Scope for MVP)**

다음 기능들은 이번 4주 MVP 개발 범위에 포함되지 않습니다.

- 일반 사용자(연구자)를 위한 회원가입 및 로그인 기능

- 사용자 그룹별 복잡한 데이터 접근 권한 관리

- 대용량 파일(수십 GB 이상)의 안정적인 업로드 및 처리를 위한 별도 아키텍처
